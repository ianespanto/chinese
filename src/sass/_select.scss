@use 'mixins' as *;

/* styled select */
.styled-select-container {
	position: relative;
	width: 100%;
	user-select: none;
	line-height: 1.3;

	/* local scrollbar theme for the select options */
	--scrollbar-thumb: rgba(45, 55, 71, 0.12);
	--scrollbar-thumb-hover: rgba(45, 55, 71, 0.18);
	--scrollbar-track: rgba(0, 0, 0, 0);
	--scrollbar-width: 8px;

	/* caret size and color (skinnier caret) */
	--caret-width: 5px; /* horizontal half-width of the triangle (smaller = skinnier) */
	--caret-height: 8px; /* vertical height of the triangle */

	.styled-select-button {
		display: flex;
		justify-content: space-between;
		align-items: center;
		width: 100%;
		padding: 10px;
		border: 1px solid var(--border);
		border-radius: 6px;
		background-color: var(--white);
		cursor: pointer;
		font-size: 16px;
		text-align: left;
		transition: border-color 0.2s;
		position: relative; /* needed for absolute caret positioning */

		&:focus {
			border-color: var(--border-strong);
			@include focus-shadow();
		}

		/* Replace the Unicode glyph with a CSS triangle caret for consistent rendering */
		&::after {
			content: '';
			position: absolute;
			right: 10px;
			top: 50%;
			transform: translateY(-50%);
			width: 0;
			height: 0;
			pointer-events: none;
			/* narrower triangle: smaller left/right borders, slightly taller top border */
			border-left: calc(var(--caret-width)) solid transparent;
			border-right: calc(var(--caret-width)) solid transparent;
			border-top: calc(var(--caret-height)) solid var(--text-muted);
			transition: border-top-color 0.12s ease;
		}

		/* strengthen caret color when the select is focused/hovered */
		&:hover::after,
		&:focus::after {
			border-top-color: var(--text);
		}
	}

	.styled-select-options {
		position: absolute;
		width: 100%;
		list-style: none;
		padding: 0;
		margin: 4px 0 0 0;
		border: 1px solid var(--border);
		border-radius: 6px;
		background-color: var(--bg-translucent);
		backdrop-filter: blur(3px);
		box-shadow: 0 4px 12px var(--shadow);
		max-height: 180px;
		overflow-y: auto;
		z-index: 10;

		/* Ensure smooth scrolling on touch devices */
		-webkit-overflow-scrolling: touch;

		/* Firefox: thin scrollbar with custom colors */
		scrollbar-width: thin;
		scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);

		/* WebKit-based browsers (Chrome, Safari, Edge Chromium) */
		&::-webkit-scrollbar {
			width: var(--scrollbar-width);
			height: var(--scrollbar-width);
		}

		&::-webkit-scrollbar-track {
			background: var(--scrollbar-track);
			border-radius: 10px;
		}

		&::-webkit-scrollbar-thumb {
			background-color: var(--scrollbar-thumb);
			border-radius: 10px;
			/* Make the thumb visually detached from the track for a minimal look */
			border: 2px solid transparent;
			background-clip: padding-box;
		}

		&::-webkit-scrollbar-thumb:hover {
			background-color: var(--scrollbar-thumb-hover);
		}

		&:focus {
			outline: none;
		}

		.styled-select-option-item {
			padding: 10px;
			cursor: pointer;
			border-bottom: 1px solid var(--light-3);

			&:last-child {
				border-bottom: none;
			}

			&.styled-select-option-item-active {
				background-color: var(--select-hover);
			}

			&:focus {
				outline: none;
			}

			&.styled-select-option-item-highlighted {
				font-weight: 600;
			}
		}
	}
}
